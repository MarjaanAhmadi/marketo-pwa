{"ast":null,"code":"import _objectSpread from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/marjaan/sandBox/projects/marketo-pwa/src/components/ShoppingCard/DeliveryTime/DeliveryTime.jsx\";\nimport React, { useState } from 'react';\nimport SingleDay from './SingleDay/SingleDay';\nimport { makeStyles } from '@material-ui/styles';\nimport { useEffect } from 'react';\nimport shipmentReq from '../../../requests/shipments';\nimport { Button, InputBase } from '@material-ui/core';\nimport Modal from '@material-ui/core/Modal';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Fade from '@material-ui/core/Fade';\nimport { useDispatch, useSelector } from 'react-redux';\nimport axiosInstance from '../../../config/axiosOrders';\nimport { useHistory } from 'react-router-dom';\nvar useStyles = makeStyles({\n  root: {\n    paddingTop: 5\n  },\n  gButton: {\n    position: 'fixed',\n    bottom: \"10%\",\n    backgroundColor: '#2C7BE5',\n    color: 'white',\n    borderRadius: 10,\n    width: '40%',\n    fontFamily: 'IranSans',\n    right: '30%'\n  },\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  paper: {\n    backgroundColor: 'white',\n    border: '2px solid #000',\n    padding: 20\n  }\n});\n\nvar DeliveryTime = function DeliveryTime() {\n  var classes = useStyles();\n  var dispatch = useDispatch();\n  var history = useHistory();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      open = _React$useState2[0],\n      setOpen = _React$useState2[1];\n\n  var _useState = useState({\n    list: []\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      shipments = _useState2[0],\n      setShipments = _useState2[1];\n\n  var shipmentOrder = useSelector(function (state) {\n    return state.shipmentOrder;\n  });\n  var orderId = useSelector(function (state) {\n    return state.orderId;\n  });\n\n  var _useState3 = useState({\n    time: '',\n    day: ''\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      shipmentForm = _useState4[0],\n      setShipmentForm = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      couponCode = _useState6[0],\n      setCouponCode = _useState6[1];\n\n  var handleOpen = function handleOpen() {\n    try {\n      setOpen(true); // history.push('/orders')\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  var handleClose =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setOpen(false);\n              _context.next = 4;\n              return sendShipment();\n\n            case 4:\n              _context.next = 9;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 6]]);\n    }));\n\n    return function handleClose() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var getShipments =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return shipmentReq('GET', null, null);\n\n            case 2:\n              response = _context2.sent;\n              setShipments(_objectSpread({}, shipments, {\n                list: response.data\n              }));\n              dispatch({\n                shipments: response.data,\n                type: 'SET_SHIPMENTS'\n              });\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getShipments() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handlShipmentForm = function handlShipmentForm(time, day) {\n    var dayItem = \"\".concat(new Date().getFullYear(), \"-0\").concat(new Date().getMonth() + 1, \"-\").concat(new Date().getDate() + day);\n    var timeItem = \"\".concat(time.length > 0 ? time : \"0\".concat(time), \":00:00.000\");\n    setShipmentForm(_objectSpread({}, shipmentForm, {\n      time: timeItem,\n      day: dayItem\n    }));\n  };\n\n  var sendShipment =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var data, response;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              data = {\n                address: shipmentOrder.address,\n                city: \"tehran\",\n                deliveryTime: \"\".concat(shipmentForm.day, \"T\").concat(shipmentForm.time, \"Z\"),\n                id: shipments.list[0].id,\n                lat: shipmentOrder.location.lat,\n                lon: shipmentOrder.location.lon,\n                postalCode: shipmentOrder.postalCode,\n                region: \"Theran\",\n                couponCode: couponCode\n              };\n              axiosInstance.defaults.headers.common['user_id'] = 'xxx';\n              _context3.next = 4;\n              return axiosInstance.post(\"/v1/xxx/order/\".concat(orderId, \"/shipment\"), data);\n\n            case 4:\n              response = _context3.sent;\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function sendShipment() {\n      return _ref3.apply(this, arguments);\n    };\n  }(); // const renderShipments = (props) => {\n  //     return(\n  //         <React.Fragment>\n  //             <SingleDay day=\"1\" />\n  //         </React.Fragment>\n  //     )\n  // }\n\n\n  useEffect(function () {\n    getShipments();\n  }, []);\n  return React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(SingleDay, {\n    setShipmentTime: function setShipmentTime(time, day) {\n      handlShipmentForm(time, day);\n    },\n    day: 1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }), React.createElement(SingleDay, {\n    setShipmentTime: function setShipmentTime(time, day) {\n      handlShipmentForm(time, day);\n    },\n    day: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }), React.createElement(SingleDay, {\n    setShipmentTime: function setShipmentTime(time, day) {\n      handlShipmentForm(time, day);\n    },\n    day: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }), React.createElement(SingleDay, {\n    setShipmentTime: function setShipmentTime(time, day) {\n      handlShipmentForm(time, day);\n    },\n    day: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }), React.createElement(Button, {\n    onClick: handleOpen,\n    className: classes.gButton,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"\\u062B\\u0628\\u062A \\u0646\\u0647\\u0627\\u06CC\\u06CC\"), React.createElement(Modal, {\n    \"aria-labelledby\": \"transition-modal-title\",\n    \"aria-describedby\": \"transition-modal-description\",\n    className: classes.modal,\n    open: open,\n    onClose: handleClose,\n    closeAfterTransition: true,\n    BackdropComponent: Backdrop,\n    BackdropProps: {\n      timeout: 500\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(Fade, {\n    in: open,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    id: \"transition-modal-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, \"\\u0622\\u06CC\\u0627 \\u06A9\\u0648\\u067E\\u0646 \\u062F\\u0627\\u0631\\u06CC\\u062F\\u061F\"), React.createElement(\"div\", {\n    id: \"transition-modal-description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, \"\\u06A9\\u062F \\u06A9\\u0648\\u067E\\u0646:\", React.createElement(InputBase, {\n    value: couponCode,\n    onChange: function onChange(event) {\n      setCouponCode(event.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  })), React.createElement(Button, {\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, \"\\u062B\\u0628\\u062A\"), React.createElement(Button, {\n    onClick: sendShipment,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, \"\\u062E\\u0631\\u0648\\u062C\")))));\n};\n\nexport default DeliveryTime;","map":{"version":3,"sources":["/home/marjaan/sandBox/projects/marketo-pwa/src/components/ShoppingCard/DeliveryTime/DeliveryTime.jsx"],"names":["React","useState","SingleDay","makeStyles","useEffect","shipmentReq","Button","InputBase","Modal","Backdrop","Fade","useDispatch","useSelector","axiosInstance","useHistory","useStyles","root","paddingTop","gButton","position","bottom","backgroundColor","color","borderRadius","width","fontFamily","right","modal","display","alignItems","justifyContent","paper","border","padding","DeliveryTime","classes","dispatch","history","open","setOpen","list","shipments","setShipments","shipmentOrder","state","orderId","time","day","shipmentForm","setShipmentForm","couponCode","setCouponCode","handleOpen","error","console","log","handleClose","sendShipment","getShipments","response","data","type","handlShipmentForm","dayItem","Date","getFullYear","getMonth","getDate","timeItem","length","address","city","deliveryTime","id","lat","location","lon","postalCode","region","defaults","headers","common","post","timeout","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport SingleDay from './SingleDay/SingleDay';\nimport { makeStyles } from '@material-ui/styles';\nimport { useEffect } from 'react';\nimport shipmentReq from '../../../requests/shipments';\nimport { Button, InputBase } from '@material-ui/core';\nimport Modal from '@material-ui/core/Modal';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Fade from '@material-ui/core/Fade';\nimport { useDispatch, useSelector } from 'react-redux';\nimport axiosInstance from '../../../config/axiosOrders';\nimport { useHistory } from 'react-router-dom';\nconst useStyles = makeStyles({\n    root: {\n        paddingTop: 5\n    },\n    gButton: {\n        position: 'fixed',\n        bottom: \"10%\",\n        backgroundColor: '#2C7BE5',\n        color: 'white',\n        borderRadius: 10,\n        width: '40%',\n        fontFamily: 'IranSans',\n        right: '30%'\n    },\n    modal: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      },\n      paper: {\n        backgroundColor: 'white',\n        border: '2px solid #000',\n        padding: 20\n      },\n})\n\nconst DeliveryTime = () => {\n\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const [open, setOpen] = React.useState(false);\n    const [shipments, setShipments] = useState({\n        list: []\n    });\n    const shipmentOrder = useSelector(state => state.shipmentOrder);\n    const orderId = useSelector(state => state.orderId);\n    const [shipmentForm, setShipmentForm] = useState({\n        time: '',\n        day: ''\n    });\n    const [couponCode, setCouponCode] = useState(null)\n    const handleOpen = () => {\n        try {\n        setOpen(true);\n        // history.push('/orders')\n            \n        } catch (error) {\n            console.log(error)\n        }\n    };\n    \n      const handleClose = async() => {\n        try {\n            setOpen(false);\n            await sendShipment();\n            // history.push('/orders')\n\n        } catch (error) {\n            console.log(error)\n        }\n\n      };\n    const getShipments = async () => {\n        const response = await shipmentReq('GET', null, null);\n        setShipments({\n            ...shipments,\n            list: response.data\n        });\n         \n        dispatch({shipments: response.data, type: 'SET_SHIPMENTS'})\n    }\n    const handlShipmentForm = (time, day) => {\n        const dayItem = `${new Date().getFullYear()}-0${new Date().getMonth()+1}-${new Date().getDate() + day}`;\n        const timeItem = `${time.length > 0 ? time : `0${time}`}:00:00.000`;\n        setShipmentForm({\n            ...shipmentForm,\n            time: timeItem,\n            day: dayItem\n        })\n\n    }\n    const sendShipment = async () => {\n\n        const data = {\n            address: shipmentOrder.address,\n            city: \"tehran\",\n            deliveryTime: `${shipmentForm.day}T${shipmentForm.time}Z`,\n            id: shipments.list[0].id,\n            lat: shipmentOrder.location.lat,\n            lon: shipmentOrder.location.lon,\n            postalCode: shipmentOrder.postalCode,\n            region: \"Theran\",\n            couponCode: couponCode\n        }\n        axiosInstance.defaults.headers.common['user_id'] = 'xxx';\n        const response = await axiosInstance.post(`/v1/xxx/order/${orderId}/shipment`, data);\n\n    }\n    // const renderShipments = (props) => {\n    //     return(\n    //         <React.Fragment>\n    //             <SingleDay day=\"1\" />\n                \n    //         </React.Fragment>\n    //     )\n    // }\n    useEffect(()=>{\n        getShipments();\n    },[])\n    return(\n        <div className={classes.root}>\n                <SingleDay setShipmentTime={(time, day) => {handlShipmentForm(time, day)}} day={1} />\n                <SingleDay setShipmentTime={(time, day) => {handlShipmentForm(time, day)}} day={2} />\n                <SingleDay setShipmentTime={(time, day) => {handlShipmentForm(time, day)}} day={3} />\n                <SingleDay setShipmentTime={(time, day) => {handlShipmentForm(time, day)}} day={4} />\n                \n                <Button onClick={handleOpen} className={classes.gButton}>ثبت نهایی</Button>\n                <Modal\n                    aria-labelledby=\"transition-modal-title\"\n                    aria-describedby=\"transition-modal-description\"\n                    className={classes.modal}\n                    open={open}\n                    onClose={handleClose}\n                    closeAfterTransition\n                    BackdropComponent={Backdrop}\n                    BackdropProps={{\n                    timeout: 500,\n                    }}\n                >\n                    <Fade in={open}>\n                    <div className={classes.paper}>\n                        <h4 id=\"transition-modal-title\">آیا کوپن دارید؟</h4>\n                        <div id=\"transition-modal-description\">\n                            کد کوپن:<InputBase \n                            value={couponCode}\n                            onChange={(event) => {\n                                setCouponCode(event.target.value)\n                            }}\n                            />\n                        \n                        </div>\n                        <Button onClick={handleClose}>ثبت</Button>\n                        <Button onClick={sendShipment}>خروج</Button>\n\n                    </div>\n                    </Fade>\n                </Modal>\n        </div>\n    )\n}\nexport default DeliveryTime;"]},"metadata":{},"sourceType":"module"}