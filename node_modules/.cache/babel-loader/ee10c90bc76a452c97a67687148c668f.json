{"ast":null,"code":"import _regeneratorRuntime from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/marjaan/sandBox/projects/marketo-pwa/src/components/ShoppingCard/SingleShoppedProduct/SingleShoppedProduct.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Rating from '@material-ui/lab/Rating';\nimport AddToShoppingCard from '../../../mainComponents/AddToShoppingCard/AddToShoppingCard';\nimport AddOrRemoveFromShCard from '../../../mainComponents/AddOrRemove/AddOrRemoveFromShCard';\nimport { Divider } from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport axiosTest from '../../../config/axiosTest';\nimport axiosInstance from '../../../config/axios';\nimport currency from '../../../filtering/currency';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      marginTop: 10,\n      height: 140,\n      borderRadius: 10,\n      justifyContent: 'space-around'\n    },\n    addOrRemove: {\n      padding: 0\n    },\n    rightSide: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between'\n    },\n    name: {\n      fontSize: 14,\n      fontWeight: 600,\n      paddingTop: 5\n    },\n    weight: {\n      fontSize: 12,\n      color: '#9A9A9A'\n    },\n    weightOff: {\n      fontSize: 14,\n      fontWeight: 600,\n      color: '#36CE91'\n    },\n    prices: {\n      justifyContent: 'space-between',\n      display: 'flex',\n      flexDirection: 'column',\n      height: 45,\n      marginTop: 5\n    },\n    ratingcomp: {\n      marginLeft: 20\n    },\n    data: {\n      display: \"flex\",\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      height: 70\n    },\n    details: {\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'inherit',\n      width: '75%'\n    },\n    content: {\n      flex: '1 0 auto',\n      width: \"100%\"\n    },\n    cover: {\n      width: 50,\n      height: 50\n    },\n    controls: {\n      display: 'flex',\n      alignItems: 'center',\n      paddingLeft: theme.spacing(1),\n      paddingBottom: theme.spacing(1)\n    },\n    delete: {\n      display: 'flex',\n      justifyContent: 'space-around',\n      flexDirection: 'column'\n    },\n    deleteIcon: {\n      fontSize: 25,\n      color: '#E2574C',\n      alignSelf: 'center'\n    },\n    deleteText: {\n      fontSize: 10,\n      color: '#E2574C',\n      alignSelf: 'center'\n    }\n  };\n});\nexport default function SingleShoppedProduct(props) {\n  var classes = useStyles();\n  var dispatch = useDispatch();\n  var orderId = useSelector(function (state) {\n    return state.orderId;\n  });\n  var orders = useSelector(function (state) {\n    return state.orders;\n  });\n  var orderItemIds = useSelector(function (state) {\n    return state.orderItemIds;\n  });\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      productItem = _useState2[0],\n      setProductItem = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      price = _useState4[0],\n      setPrice = _useState4[1];\n\n  var _useState5 = useState(props.product.count),\n      _useState6 = _slicedToArray(_useState5, 2),\n      count = _useState6[0],\n      setCount = _useState6[1];\n\n  var addToShoppingCardFunc =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(orders.length > 0)) {\n                _context.next = 11;\n                break;\n              }\n\n              debugger;\n\n              if (!(orderId === 0)) {\n                _context.next = 7;\n                break;\n              }\n\n              _context.next = 5;\n              return createOrder();\n\n            case 5:\n              _context.next = 9;\n              break;\n\n            case 7:\n              _context.next = 9;\n              return updateOrderItem();\n\n            case 9:\n              _context.next = 13;\n              break;\n\n            case 11:\n              _context.next = 13;\n              return createOrder();\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function addToShoppingCardFunc() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var checkExistItem = function checkExistItem() {\n    debugger;\n    var reducerItems = orderItemIds.filter(function (i) {\n      return i.itemId === productItem.id;\n    });\n    debugger;\n    if (reducerItems.length > 0) return reducerItems[0];else return null;\n  };\n\n  var updateCountItem =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(item) {\n      var obj, objectItem, response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              debugger;\n              obj = {\n                inventoryId: props.product.inventoryId,\n                count: count + 1,\n                fee: price,\n                productItemId: item.itemId,\n                productId: props.product.productId\n              };\n              debugger;\n              objectItem = {\n                id: item.id,\n                count: item.count + 1,\n                itemId: item.itemId\n              };\n              debugger;\n              axiosTest.defaults.headers.common[\"user_id\"] = \"xxx\";\n              dispatch({\n                item: objectItem,\n                type: 'UPDATE_ORDER_ITEM_IDS'\n              });\n              setCount(item.count + 1);\n              _context2.next = 11;\n              return axiosTest.put(\"/v1/xxx/order/\".concat(orderId, \"/item/\").concat(item.id), obj);\n\n            case 11:\n              response = _context2.sent;\n              _context2.next = 14;\n              return getOrderById(orderId);\n\n            case 14:\n              _context2.next = 18;\n              break;\n\n            case 16:\n              _context2.prev = 16;\n              _context2.t0 = _context2[\"catch\"](0);\n\n            case 18:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 16]]);\n    }));\n\n    return function updateCountItem(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var updateOrderItem =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var exist;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              debugger; // const orderItem = currentOrder.items\n\n              exist = checkExistItem();\n              debugger;\n\n              if (!(exist !== null)) {\n                _context3.next = 9;\n                break;\n              }\n\n              _context3.next = 7;\n              return updateCountItem(exist);\n\n            case 7:\n              _context3.next = 10;\n              break;\n\n            case 9:\n              addNewItemToOrder(orderId);\n\n            case 10:\n              _context3.next = 14;\n              break;\n\n            case 12:\n              _context3.prev = 12;\n              _context3.t0 = _context3[\"catch\"](0);\n\n            case 14:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 12]]);\n    }));\n\n    return function updateOrderItem() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var addNewItemToOrder =\n  /*#__PURE__*/\n  function () {\n    var _ref4 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4(id) {\n      var obj, response, objItem;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              obj = {\n                inventoryId: props.product.inventoryId,\n                count: count + 1,\n                fee: price,\n                productItemId: productItem.id,\n                productId: productItem.product.id\n              };\n              debugger;\n              _context4.next = 5;\n              return axiosTest.post(\"/v1/xxx/order/\".concat(id, \"/item\"), obj);\n\n            case 5:\n              response = _context4.sent;\n              objItem = {\n                id: response.data.id,\n                count: 1,\n                itemId: productItem.id\n              };\n              debugger;\n              dispatch({\n                newItem: objItem,\n                type: 'SET_ORDER_ITEM_IDS'\n              });\n              setCount(count + 1);\n              _context4.next = 14;\n              break;\n\n            case 12:\n              _context4.prev = 12;\n              _context4.t0 = _context4[\"catch\"](0);\n\n            case 14:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 12]]);\n    }));\n\n    return function addNewItemToOrder(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var createOrder =\n  /*#__PURE__*/\n  function () {\n    var _ref5 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee5() {\n      var data, response;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              debugger;\n              _context5.prev = 1;\n              data = {\n                owner: '',\n                status: 'PENDING',\n                items: []\n              };\n              axiosTest.defaults.headers.common[\"user_id\"] = \"xxx\";\n              _context5.next = 6;\n              return axiosTest.post('/v1/xxx/order', data);\n\n            case 6:\n              response = _context5.sent;\n              _context5.next = 9;\n              return getOrderById(response.data.id);\n\n            case 9:\n              dispatch({\n                orderId: response.data.id,\n                type: 'SET_ORDERID'\n              });\n              _context5.next = 12;\n              return addNewItemToOrder(response.data.id);\n\n            case 12:\n              debugger;\n              _context5.next = 17;\n              break;\n\n            case 15:\n              _context5.prev = 15;\n              _context5.t0 = _context5[\"catch\"](1);\n\n            case 17:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[1, 15]]);\n    }));\n\n    return function createOrder() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var getOrderById =\n  /*#__PURE__*/\n  function () {\n    var _ref6 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee6(id) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              axiosTest.defaults.headers.common[\"user_id\"] = \"xxx\";\n              _context6.next = 3;\n              return axiosTest.get(\"/v1/xxx/order/\".concat(id));\n\n            case 3:\n              response = _context6.sent;\n              dispatch({\n                currentOrder: response.data,\n                type: 'SET_CURRENT_ORDER'\n              });\n\n            case 5:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function getOrderById(_x3) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var getProductItem =\n  /*#__PURE__*/\n  function () {\n    var _ref7 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee7() {\n      var priceItem, pItem, orderItem;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.prev = 0;\n              axiosTest.defaults.headers.common['user_id'] = 'xxx'; // const response = await axiosInstance.get(`/product/${props.pid}/item/${props.product.id}`)\n\n              debugger;\n              _context7.next = 5;\n              return axiosInstance.get(\"/product/\".concat(props.product.productId, \"/item/\").concat(props.product.productItemId, \"/pricing\"));\n\n            case 5:\n              priceItem = _context7.sent;\n              pItem = priceItem.data[0].item;\n              setProductItem(pItem);\n              setPrice(priceItem.data[0].amount);\n              debugger;\n              orderItem = orderItemIds.filter(function (i) {\n                return i.itemId === pItem.id;\n              });\n\n              if (orderItem.length > 0) {\n                setCount(orderItem[0].count);\n              }\n\n              _context7.next = 17;\n              break;\n\n            case 14:\n              _context7.prev = 14;\n              _context7.t0 = _context7[\"catch\"](0);\n              debugger;\n\n            case 17:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[0, 14]]);\n    }));\n\n    return function getProductItem() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var addItem = function addItem() {};\n\n  var _removeItem =\n  /*#__PURE__*/\n  function () {\n    var _ref8 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee8() {\n      var exist, obj, objItem, response;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              exist = checkExistItem();\n\n              if (!(exist !== null)) {\n                _context8.next = 28;\n                break;\n              }\n\n              debugger;\n\n              if (!(exist.count !== 1)) {\n                _context8.next = 21;\n                break;\n              }\n\n              _context8.prev = 4;\n              obj = {\n                inventoryId: props.product.inventoryId,\n                count: count - 1,\n                fee: price,\n                productItemId: exist.itemId,\n                productId: props.pid\n              };\n              objItem = {\n                id: exist.id,\n                count: exist.count - 1,\n                itemId: exist.itemId\n              };\n              debugger;\n              dispatch({\n                item: objItem,\n                type: 'UPDATE_ORDER_ITEM_IDS'\n              });\n              setCount(count - 1);\n              _context8.next = 12;\n              return axiosTest.put(\"/v1/xxx/order/\".concat(orderId, \"/item/\").concat(exist.id), obj);\n\n            case 12:\n              response = _context8.sent;\n              _context8.next = 15;\n              return getOrderById(orderId);\n\n            case 15:\n              _context8.next = 19;\n              break;\n\n            case 17:\n              _context8.prev = 17;\n              _context8.t0 = _context8[\"catch\"](4);\n\n            case 19:\n              _context8.next = 28;\n              break;\n\n            case 21:\n              _context8.prev = 21;\n              _context8.next = 24;\n              return deleteFullItem(exist);\n\n            case 24:\n              _context8.next = 28;\n              break;\n\n            case 26:\n              _context8.prev = 26;\n              _context8.t1 = _context8[\"catch\"](21);\n\n            case 28:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8, null, [[4, 17], [21, 26]]);\n    }));\n\n    return function removeItem() {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  var deleteFullItem =\n  /*#__PURE__*/\n  function () {\n    var _ref9 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee9() {\n      var exist, response;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              _context9.prev = 0;\n              debugger;\n              exist = checkExistItem();\n              _context9.next = 5;\n              return axiosTest.delete(\"/v1/xxx/order/\".concat(orderId, \"/item/\").concat(exist.id));\n\n            case 5:\n              response = _context9.sent;\n              dispatch({\n                id: exist.id,\n                type: 'REMOVE_ORDER_ITEM_ID'\n              });\n              _context9.next = 9;\n              return getOrderById(orderId);\n\n            case 9:\n              setCount(0);\n              _context9.next = 15;\n              break;\n\n            case 12:\n              _context9.prev = 12;\n              _context9.t0 = _context9[\"catch\"](0);\n              console.log(_context9.t0);\n\n            case 15:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9, null, [[0, 12]]);\n    }));\n\n    return function deleteFullItem() {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getProductItem();\n  }, []);\n  return React.createElement(Card, {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.rightSide,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316\n    },\n    __self: this\n  }, React.createElement(CardMedia, {\n    className: classes.cover,\n    image: \"http://185.147.161.71:8080/\".concat(productItem.images !== undefined ? productItem.images[0] : '', \".jpg\"),\n    title: productItem.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: classes.delete,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322\n    },\n    __self: this\n  }, React.createElement(DeleteIcon, {\n    onClick: deleteFullItem,\n    className: classes.deleteIcon,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: classes.deleteText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324\n    },\n    __self: this\n  }, \"\\u062D\\u0630\\u0641\"))), React.createElement(\"div\", {\n    className: classes.details,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328\n    },\n    __self: this\n  }, React.createElement(CardContent, {\n    className: classes.content,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.data,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: classes.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331\n    },\n    __self: this\n  }, productItem.title), React.createElement(\"div\", {\n    className: classes.addOrRemove,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334\n    },\n    __self: this\n  }, React.createElement(AddOrRemoveFromShCard, {\n    removeItem: function removeItem() {\n      _removeItem();\n    },\n    addItem: function addItem() {\n      addToShoppingCardFunc();\n    },\n    count: count,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335\n    },\n    __self: this\n  }))), React.createElement(Divider, {\n    variant: \"light\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: classes.prices,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.data,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: classes.weight,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343\n    },\n    __self: this\n  }, \"\\u0642\\u06CC\\u0645\\u062A \\u0627\\u0635\\u0644\\u06CC\"), React.createElement(\"span\", {\n    className: classes.weight,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344\n    },\n    __self: this\n  }, currency(price / 10), \" \\u062A\\u0648\\u0645\\u0627\\u0646\")), React.createElement(\"div\", {\n    className: classes.data,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: classes.weight,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347\n    },\n    __self: this\n  }, \"\\u0642\\u06CC\\u0645\\u062A \\u0631\\u0648\\u0628\\u06CC\\u06A9\\u0627\"), React.createElement(\"span\", {\n    className: classes.weightOff,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348\n    },\n    __self: this\n  }, currency(price / 10), \" \\u062A\\u0648\\u0645\\u0627\\u0646\"))))));\n}","map":{"version":3,"sources":["/home/marjaan/sandBox/projects/marketo-pwa/src/components/ShoppingCard/SingleShoppedProduct/SingleShoppedProduct.jsx"],"names":["React","useEffect","useState","makeStyles","useTheme","useSelector","useDispatch","Card","CardContent","CardMedia","Rating","AddToShoppingCard","AddOrRemoveFromShCard","Divider","DeleteIcon","axiosTest","axiosInstance","currency","useStyles","theme","root","display","marginTop","height","borderRadius","justifyContent","addOrRemove","padding","rightSide","flexDirection","name","fontSize","fontWeight","paddingTop","weight","color","weightOff","prices","ratingcomp","marginLeft","data","details","width","content","flex","cover","controls","alignItems","paddingLeft","spacing","paddingBottom","delete","deleteIcon","alignSelf","deleteText","SingleShoppedProduct","props","classes","dispatch","orderId","state","orders","orderItemIds","productItem","setProductItem","price","setPrice","product","count","setCount","addToShoppingCardFunc","length","createOrder","updateOrderItem","checkExistItem","reducerItems","filter","i","itemId","id","updateCountItem","item","obj","inventoryId","fee","productItemId","productId","objectItem","defaults","headers","common","type","put","response","getOrderById","exist","addNewItemToOrder","post","objItem","newItem","owner","status","items","get","currentOrder","getProductItem","priceItem","pItem","amount","orderItem","addItem","removeItem","pid","deleteFullItem","console","log","images","undefined","title"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport {useSelector, useDispatch} from 'react-redux';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Rating from '@material-ui/lab/Rating';\nimport AddToShoppingCard from '../../../mainComponents/AddToShoppingCard/AddToShoppingCard';\nimport AddOrRemoveFromShCard from '../../../mainComponents/AddOrRemove/AddOrRemoveFromShCard';\nimport { Divider } from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport axiosTest from '../../../config/axiosTest';\nimport axiosInstance from '../../../config/axios'; \nimport currency from '../../../filtering/currency';\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    marginTop: 10,\n    height: 140,\n    borderRadius: 10,\n    justifyContent: 'space-around'\n  },\n  addOrRemove: {\n    padding: 0\n  },\n  rightSide: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between'\n  },\n  name: {\n    fontSize: 14,\n    fontWeight: 600,\n    paddingTop: 5,\n  },\n  weight: {\n    fontSize: 12,\n    color: '#9A9A9A',\n  },\n  weightOff: {\n    fontSize: 14,\n    fontWeight: 600,\n    color: '#36CE91'\n  },\n  prices: {\n    justifyContent: 'space-between',\n    display: 'flex',\n    flexDirection: 'column',\n    height: 45,\n    marginTop: 5\n  },\n  ratingcomp: {\n    marginLeft: 20\n  },\n  data : {\n    display: \"flex\",\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    height: 70\n  },\n  details: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'inherit',\n    width: '75%'\n  },\n  content: {\n    flex: '1 0 auto',\n    width: \"100%\"\n  },\n  cover: {\n    width: 50,\n    height: 50\n  },\n  controls: {\n    display: 'flex',\n    alignItems: 'center',\n    paddingLeft: theme.spacing(1),\n    paddingBottom: theme.spacing(1),\n  },\n  delete: {\n    display: 'flex',\n    justifyContent: 'space-around',\n    flexDirection: 'column'\n  },\n  deleteIcon: {\n    fontSize: 25,\n    color: '#E2574C',\n    alignSelf: 'center'\n  },\n  deleteText: {\n    fontSize: 10,\n    color: '#E2574C',\n    alignSelf: 'center'\n  },\n}));\n\nexport default function SingleShoppedProduct(props) {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const orderId = useSelector(state => state.orderId);\n  const orders = useSelector(state => state.orders);\n  const orderItemIds = useSelector(state => state.orderItemIds);\n  const [productItem, setProductItem] = useState({});\n  const [price, setPrice] = useState(0)\n  const [count, setCount] = useState(props.product.count);\n  const addToShoppingCardFunc = async() => {\n    if(orders.length > 0) {\n      debugger\n\n      if(orderId === 0)\n      {\n        await createOrder();\n      }\n      else {\n\n        await updateOrderItem();\n           \n      }\n    }\n    else await createOrder();\n}\nconst checkExistItem = () => {\n   debugger\n  const reducerItems = orderItemIds.filter(i => i.itemId === productItem.id);\n   debugger\n  if(reducerItems.length > 0)\n   return reducerItems[0] \n  else return null;\n}\nconst updateCountItem = async (item) => {\n  try {\n    debugger\n    const obj = {\n      inventoryId: props.product.inventoryId,\n      count: count+1,\n      fee: price,\n      productItemId: item.itemId,\n      productId: props.product.productId\n    };\n    debugger\n\n    const objectItem = {\n      id: item.id,\n      count: item.count+1,\n      itemId: item.itemId\n    }\n    debugger\n     \n    axiosTest.defaults.headers.common[\"user_id\"] = \"xxx\";\n    dispatch({item: objectItem, type: 'UPDATE_ORDER_ITEM_IDS' })\n    setCount(item.count+1)\n  \n    const response = await axiosTest.put(`/v1/xxx/order/${orderId}/item/${item.id}`,obj);\n     await getOrderById(orderId);\n  } catch (error) {\n    \n  }\n}\nconst updateOrderItem = async() => {\n  try {\n    debugger\n     \n    // const orderItem = currentOrder.items\n    const exist = checkExistItem();\n    debugger\n    if(exist !== null) {\n      await updateCountItem(exist);\n    }\n    else {\n      addNewItemToOrder(orderId); \n    }\n    \n  } catch (error) {\n    \n  }\n}\nconst addNewItemToOrder = async (id) => {\n  try {\n  const obj = {\n    inventoryId: props.product.inventoryId,\n    count: count+1,\n    fee: price,\n    productItemId: productItem.id,\n    productId: productItem.product.id\n  };\n   debugger\n  const response =await axiosTest.post(`/v1/xxx/order/${id}/item`,obj);\n   \n  const objItem = {\n    id: response.data.id,\n    count: 1,\n    itemId: productItem.id\n  } \n  debugger\n  dispatch({newItem: objItem, type: 'SET_ORDER_ITEM_IDS'});\n\n  setCount(count+1)\n   \n  } catch (error) {\n    \n  }\n}\nconst createOrder = async () => {\n  debugger\n  try {\n\n    const data = {\n      owner: '',\n      status: 'PENDING',\n      items: []\n    }\n    axiosTest.defaults.headers.common[\"user_id\"] = \"xxx\";\n    const response = await axiosTest.post('/v1/xxx/order', data);\n     \n    await getOrderById(response.data.id);\n    dispatch({orderId: response.data.id, type: 'SET_ORDERID'});\n    await addNewItemToOrder(response.data.id);\n    debugger\n  } catch (error) {\n    \n  }\n}\nconst getOrderById = async (id) => {\n  axiosTest.defaults.headers.common[\"user_id\"] = \"xxx\";\n  const response =await axiosTest.get(`/v1/xxx/order/${id}`);\n  dispatch({currentOrder: response.data, type: 'SET_CURRENT_ORDER'});\n}\nconst getProductItem = async () => {\n  try {\n    axiosTest.defaults.headers.common['user_id'] = 'xxx'\n    // const response = await axiosInstance.get(`/product/${props.pid}/item/${props.product.id}`)\n    debugger\n    const priceItem = await axiosInstance.get(`/product/${props.product.productId}/item/${props.product.productItemId}/pricing`)      \n    const pItem = priceItem.data[0].item;\n    setProductItem(pItem);      \n    setPrice(priceItem.data[0].amount);\n    debugger\n    const orderItem = orderItemIds.filter(i => i.itemId === pItem.id);\n    if(orderItem.length > 0){\n      setCount(orderItem[0].count)\n    }\n\n  } catch (error) {\n    debugger\n    \n  }\n}\nconst addItem = () => {\n\n}\n\nconst removeItem = async () => {\n  const exist = checkExistItem();\n  if(exist !== null){\n    debugger\n    if(exist.count !== 1) {\n      try {\n        const obj = {\n          inventoryId: props.product.inventoryId,\n          count: count-1,\n          fee: price,\n          productItemId: exist.itemId,\n          productId: props.pid\n        };\n        \n        const objItem = {\n          id: exist.id,\n          count: exist.count-1,\n          itemId: exist.itemId\n        }\n        debugger\n        dispatch({item: objItem, type: 'UPDATE_ORDER_ITEM_IDS'})\n        setCount(count-1);\n        const response = await axiosTest.put(`/v1/xxx/order/${orderId}/item/${exist.id}`,obj);\n        await getOrderById(orderId)\n      } catch (error) {\n        \n      }\n    }\n    else {\n      try {\n                await deleteFullItem(exist);\n      } catch (error) {\n        \n      }\n    }\n    \n  }\n  \n\n}\nconst deleteFullItem = async() => {\n  try{\n      debugger\n    const exist = checkExistItem();\n    const response = await axiosTest.delete(`/v1/xxx/order/${orderId}/item/${exist.id}`);\n\n    \n        dispatch({id: exist.id, type: 'REMOVE_ORDER_ITEM_ID'});\n        await getOrderById(orderId);\n        setCount(0)\n  }  \n  catch(error){\n    console.log(error)\n  }\n}\nuseEffect(() => {\n  getProductItem();\n},[])\n\n  return (\n      \n\n    <Card className={classes.root}>\n    <div className={classes.rightSide}>\n    <CardMedia\n        className={classes.cover}\n        image={`http://185.147.161.71:8080/${productItem.images !== undefined ? productItem.images[0] : ''}.jpg`}\n        title={productItem.title}\n      />\n      <div className={classes.delete}>\n      <DeleteIcon onClick={deleteFullItem} className={classes.deleteIcon}/>\n      <span className={classes.deleteText}>حذف</span>\n      </div>  \n    </div>\n     \n      <div className={classes.details}>\n        <CardContent className={classes.content}>\n          <div className={classes.data}>\n          <span className={classes.name}>\n            {productItem.title} \n          </span>\n            <div  className={classes.addOrRemove}>\n          <AddOrRemoveFromShCard removeItem={() => {removeItem()}} addItem={() => {addToShoppingCardFunc()}} count={count}/>\n\n            </div>\n          </div>\n          \n          <Divider variant=\"light\"/>\n         <div className={classes.prices}>\n         <div className={classes.data}>\n            <span className={classes.weight}>قیمت اصلی</span>\n            <span className={classes.weight}>{currency(price/10)} تومان</span>\n          </div>\n          <div className={classes.data}>\n            <span className={classes.weight}>قیمت روبیکا</span>\n            <span className={classes.weightOff}>{currency(price/10)} تومان</span>\n          </div>\n         </div>\n        </CardContent>\n        \n      </div>\n      \n    </Card>\n  );\n}"]},"metadata":{},"sourceType":"module"}