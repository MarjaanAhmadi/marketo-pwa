{"ast":null,"code":"import _regeneratorRuntime from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/marjaan/sandBox/projects/marketo-pwa/src/components/Address/CrudAddress/CreateAddress/CreateAddress.jsx\";\nimport React, { useState } from 'react';\nimport MapCont from './Map/MapCont';\nimport UserDataAddress from '../UserDataAddress/UserDataAddress';\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Button } from \"@material-ui/core\";\nimport Test from './Map/mapgl/mapgl';\nimport axiosAuth from '../../../../config/axiosAuth';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nvar useStyle = makeStyles({\n  button: {\n    position: 'fixed',\n    bottom: \"10%\",\n    backgroundColor: '#2C7BE5',\n    color: 'white',\n    borderRadius: 10,\n    width: '40%',\n    fontFamily: 'IranSans',\n    right: '30%'\n  }\n});\n\nvar CreateAddress = function CreateAddress() {\n  var dispatch = useDispatch();\n  var classes = useStyle();\n  var history = useHistory();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      _showData = _useState2[1];\n\n  var addresses = useSelector(function (state) {\n    return state.addresses;\n  });\n  var token = useSelector(function (state) {\n    return state.token;\n  });\n\n  var _useState3 = useState({\n    location: {\n      lat: 0,\n      long: 0\n    },\n    address: '',\n    postalCode: '',\n    phoneNumber: ''\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      addressForm = _useState4[0],\n      setAddressForm = _useState4[1];\n\n  var _setLocation = function setLocation(location) {\n    debugger;\n    setAddressForm(_objectSpread({}, addressForm, {\n      location: {\n        lat: location.latitude,\n        lon: location.longitude\n      }\n    }));\n  };\n\n  var _setAddress =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(address) {\n      var addressList, addressItem, userAddresses, _data, response;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              debugger;\n              _context.prev = 1;\n              addressList = [];\n              addressItem = {\n                address: address.address,\n                postalCode: address.postalCode,\n                phoneNumber: address.phoneNumber,\n                cityId: null,\n                city: null,\n                province: null,\n                location: addressForm.location\n              };\n              addressList.push(addressItem);\n              userAddresses = addressList.concat(addresses);\n              _data = {\n                addresses: userAddresses\n              };\n              delete axiosAuth.defaults.headers.common['user_id'];\n              axiosAuth.defaults.headers.common['Authorization'] = \"Bearer \".concat(token);\n              console.log(axiosAuth);\n              _context.next = 12;\n              return axiosAuth.put('/user/v1.0/profile/attribute', _data);\n\n            case 12:\n              response = _context.sent;\n              dispatch({\n                shipmentOrder: addressItem,\n                type: 'SET_SHIPMENT_ORDER'\n              });\n              history.push('/deliveryTime');\n              _context.next = 19;\n              break;\n\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](1);\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 17]]);\n    }));\n\n    return function setAddress(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, !data ? React.createElement(MapCont, {\n    setLocation: function setLocation(location) {\n      _setLocation(location);\n    },\n    show: data,\n    showData: function showData(show) {\n      return _showData(show);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(UserDataAddress, {\n    setAddress: function setAddress(address) {\n      _setAddress(address);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  })));\n};\n\nexport default CreateAddress;","map":{"version":3,"sources":["/home/marjaan/sandBox/projects/marketo-pwa/src/components/Address/CrudAddress/CreateAddress/CreateAddress.jsx"],"names":["React","useState","MapCont","UserDataAddress","makeStyles","Button","Test","axiosAuth","useSelector","useDispatch","useHistory","useStyle","button","position","bottom","backgroundColor","color","borderRadius","width","fontFamily","right","CreateAddress","dispatch","classes","history","data","showData","addresses","state","token","location","lat","long","address","postalCode","phoneNumber","addressForm","setAddressForm","setLocation","latitude","lon","longitude","setAddress","addressList","addressItem","cityId","city","province","push","userAddresses","concat","defaults","headers","common","console","log","put","response","shipmentOrder","type","show"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\n\nimport MapCont from './Map/MapCont';\nimport UserDataAddress from '../UserDataAddress/UserDataAddress';\nimport {  makeStyles } from \"@material-ui/styles\";\nimport {  Button } from \"@material-ui/core\";\nimport Test from './Map/mapgl/mapgl';\nimport axiosAuth from '../../../../config/axiosAuth';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nconst useStyle = makeStyles ({\n    button: {\n\t\tposition: 'fixed',\n\t\tbottom: \"10%\",\n\t\tbackgroundColor: '#2C7BE5',\n\t\tcolor: 'white',\n\t\tborderRadius: 10,\n\t\twidth: '40%',\n\t\tfontFamily: 'IranSans',\n\t\tright: '30%'\n\t},\n})\nconst CreateAddress = () => {\n    const dispatch = useDispatch();\n    const classes = useStyle();\n    const history = useHistory();\n    const [data, showData] = useState(false);\n    const addresses = useSelector(state => state.addresses);\n    const token = useSelector(state => state.token)\n    const [addressForm, setAddressForm] = useState({\n        location: {\n            lat: 0,\n            long: 0\n        },\n        address: '',\n        postalCode: '',\n        phoneNumber: '',\n    });\n    const setLocation = (location) => {\n         debugger\n        setAddressForm ({\n            ...addressForm,\n            location: {\n                lat: location.latitude,\n                lon: location.longitude\n            }\n        })\n    }\n    const setAddress = async (address) => {\n        debugger\n        try {\n            let addressList = [];\n            const addressItem = {\n            address: address.address,\n            postalCode: address.postalCode,\n            phoneNumber: address.phoneNumber,\n            cityId: null,\n            city: null,\n            province: null,\n            location: addressForm.location\n        }\n            addressList.push(addressItem);\n            const userAddresses = addressList.concat(addresses);\n            const data = {\n                addresses: userAddresses\n            }\n            delete axiosAuth.defaults.headers.common['user_id'];\n            axiosAuth.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n            console.log(axiosAuth);\n            const response = await axiosAuth.put('/user/v1.0/profile/attribute',data);\n            dispatch({shipmentOrder: addressItem, type:'SET_SHIPMENT_ORDER'});\n\n            history.push('/deliveryTime')\n        } catch (error) {\n            \n        }\n    }\n    return(\n        <React.Fragment>\n            {\n                !data ?\n                <MapCont setLocation={(location) => {setLocation(location)}} show={data} showData={(show) => showData(show)}/>\n                :\n                <div>\n                    <UserDataAddress setAddress={(address) => {setAddress(address)}}/>\n                </div>\n            }\n            \n        </React.Fragment>\n    )\n}\nexport default CreateAddress;"]},"metadata":{},"sourceType":"module"}