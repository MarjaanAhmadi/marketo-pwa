{"ast":null,"code":"import _regeneratorRuntime from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/marjaan/sandBox/projects/marketo-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/marjaan/sandBox/projects/marketo-pwa/src/components/Auth/EnterPhoneNumber/index.jsx\";\nimport React, { useState } from 'react';\nimport InputBase from '@material-ui/core/InputBase';\nimport axiosAuth from '../../../config/axiosAuth';\nimport { makeStyles } from '@material-ui/styles';\nimport { Paper } from '@material-ui/core';\nimport SubmitButton from '../../../mainComponents/SubmitButton/SubmitButton';\nimport { useDispatch } from 'react-redux';\nvar useStyles = makeStyles({\n  rootSearch: {\n    paddingTop: 6,\n    display: 'flex',\n    alignItems: 'center',\n    padding: '6px 50px'\n  },\n  input: {\n    fontFamily: 'IranSans'\n  },\n  paper: {\n    display: 'flex',\n    alignItems: 'center',\n    borderRadius: 10,\n    height: 50,\n    padding: \"0 10px\",\n    flex: 1,\n    backgroundColor: 'white',\n    justifyContent: 'space-between'\n  }\n});\n\nvar EnterPhoneNumber = function EnterPhoneNumber(props) {\n  var classes = useStyles();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      phoneNumber = _useState2[0],\n      setPhoneNumber = _useState2[1];\n\n  var dispatch = useDispatch();\n\n  var loginFlow =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n\n              if (!(phoneNumber.length === 10)) {\n                _context.next = 12;\n                break;\n              }\n\n              if (!phoneNumber.startsWith('0')) {\n                _context.next = 7;\n                break;\n              }\n\n              _context.next = 5;\n              return getCode(phoneNumber.substr(1));\n\n            case 5:\n              _context.next = 9;\n              break;\n\n            case 7:\n              _context.next = 9;\n              return getCode(phoneNumber);\n\n            case 9:\n              props.changeStatus(true);\n              _context.next = 13;\n              break;\n\n            case 12:\n              alert('10 digits');\n\n            case 13:\n              _context.next = 17;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 15]]);\n    }));\n\n    return function loginFlow() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var getCode =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(pN) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              dispatch({\n                phoneNumber: phoneNumber,\n                type: 'SET_PHONENUMBER'\n              });\n              delete axiosAuth.defaults.headers.common['user_id'];\n              _context2.next = 5;\n              return axiosAuth.get(\"/auth/v1.0/otp/\".concat(pN));\n\n            case 5:\n              response = _context2.sent;\n              _context2.next = 10;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](0);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 8]]);\n    }));\n\n    return function getCode(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.rootSearch,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    component: \"form\",\n    className: classes.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(InputBase, {\n    placeholder: \"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u0647\\u0645\\u0631\\u0627\\u0647\",\n    value: phoneNumber,\n    onChange: function onChange(event) {\n      setPhoneNumber(event.target.value);\n    },\n    className: classes.input,\n    inputProps: {\n      'aria-label': 'search google maps'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }))), React.createElement(SubmitButton, {\n    text: 'ثبت',\n    seconds: '',\n    clickHandle: loginFlow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }));\n};\n\nexport default EnterPhoneNumber;","map":{"version":3,"sources":["/home/marjaan/sandBox/projects/marketo-pwa/src/components/Auth/EnterPhoneNumber/index.jsx"],"names":["React","useState","InputBase","axiosAuth","makeStyles","Paper","SubmitButton","useDispatch","useStyles","rootSearch","paddingTop","display","alignItems","padding","input","fontFamily","paper","borderRadius","height","flex","backgroundColor","justifyContent","EnterPhoneNumber","props","classes","phoneNumber","setPhoneNumber","dispatch","loginFlow","length","startsWith","getCode","substr","changeStatus","alert","pN","type","defaults","headers","common","get","response","root","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport InputBase from '@material-ui/core/InputBase';\nimport axiosAuth from '../../../config/axiosAuth';\nimport { makeStyles } from '@material-ui/styles';\nimport {Paper} from '@material-ui/core';\nimport SubmitButton from '../../../mainComponents/SubmitButton/SubmitButton';\nimport {useDispatch} from 'react-redux';\nconst useStyles = makeStyles({\n   \n    rootSearch: {\n        paddingTop: 6,\n        display: 'flex',\n        alignItems: 'center',\n        padding: '6px 50px'\n      },\n      input: {\n          fontFamily: 'IranSans'\n      },\n        paper: {\n            display: 'flex',\n            alignItems: 'center',\n            borderRadius: 10,\n            height: 50,\n            padding: \"0 10px\",\n            flex: 1,\n            backgroundColor: 'white',\n            justifyContent: 'space-between'\n    \n          },\n     \n})\nconst EnterPhoneNumber = (props) => {\n    const classes = useStyles()\n    const [phoneNumber, setPhoneNumber] = useState(null);\n    const dispatch = useDispatch();\n    const loginFlow = async () => {\n        try {\n            if(phoneNumber.length === 10){\n                if(phoneNumber.startsWith('0')){\n                    await getCode(phoneNumber.substr(1));\n                }\n                else {\n                    await getCode(phoneNumber);\n                }\n                props.changeStatus(true)\n\n            }\n            \n            else {\n                alert('10 digits');\n            }\n        } catch (error) {\n            \n        }\n    }\n    const getCode = async (pN) => {\n        try {\n            dispatch({phoneNumber: phoneNumber, type: 'SET_PHONENUMBER'});\n            delete axiosAuth.defaults.headers.common['user_id']\n            const response = await axiosAuth.get(`/auth/v1.0/otp/${pN}`);\n         \n        } catch (error) {\n            \n        }\n    }\n    return(\n        <div className = {classes.root}>\n            <div className={classes.rootSearch}>\n            <Paper component=\"form\" className={classes.paper}>\n            <InputBase\n              \n              placeholder=\"شماره همراه\"\n                value={phoneNumber}\n                onChange={(event) => {\n                    setPhoneNumber(event.target.value)\n                }}\n              className={classes.input}\n              inputProps={{ 'aria-label': 'search google maps' }}\n            />\n            \n          </Paper>\n         </div>\n            <SubmitButton text={'ثبت'} seconds={''} clickHandle={loginFlow}/>\n        </div>\n    )\n}\nexport default EnterPhoneNumber;"]},"metadata":{},"sourceType":"module"}